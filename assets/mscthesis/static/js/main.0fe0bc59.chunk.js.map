{"version":3,"sources":["WebViz.js","App.js","serviceWorker.js","index.js"],"names":["path","truthFrameList","detectionFrameList","len","actorColor","t","walker","r","g","b","a","vehicle","d","actorScale","x","y","z","load","frameList","truthOrDet","counter","texts","cylinders","points","center","right","left","waypoints","forEach","wp","push","scale","color","pose","position","orientation","w","actors","actor","type","type_id","split","supertype","text","id","distance","toFixed","relative_position","WebViz","useState","tLoaded","setTLoaded","dLoaded","setDLoaded","setCounter","speed","setSpeed","playing","setPlaying","setMyInterval","videoEl1","useRef","videoEl2","videoEl3","video","setVideo","useEffect","fetch","then","response","json","data","Math","max","length","console","log","onDetectionFile","catch","err","onTruthFile","onPlay","onReset","current","currentTime","onSpeed","playbackRate","controlVideo","videoEl","simTime","pause","play","clear","interval","clearInterval","setInterval","newC","document","addEventListener","e","code","className","style","zIndex","src","ref","onClick","display","flexDirection","disabled","margin","frame","class","defaultCameraState","fovy","phi","thetaOffset","keyMap","KeyA","KeyD","KeyE","KeyF","KeyQ","KeyR","KeyS","KeyW","KeyX","KeyZ","autoBackgroundColor","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.0fe0bc59.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Worldview, {\n  Cubes,\n  Axes,\n  Text,\n  Cylinders,\n  Arrows,\n  Points,\n} from \"regl-worldview\";\n\nlet path = \"/rendering/3\";\n\nvar truthFrameList = [];\nvar detectionFrameList = [];\nvar len = 0;\n// text:\n\nvar actorColor = {\n  t: {\n    walker: { r: 1, g: 0.8, b: 1, a: 0.5 },\n    vehicle: { r: 1, g: 0.8, b: 1, a: 0.5 },\n  },\n  d: {\n    walker: { r: 1, g: 0.5, b: 0, a: 1 },\n    vehicle: { r: 0, g: 0.8, b: 0, a: 1 },\n  },\n};\n\nvar actorScale = {\n  walker: { x: 0.5, y: 0.5, z: 2 },\n  vehicle: { x: 3, y: 3, z: 1.5 },\n};\n\nfunction load(frameList, truthOrDet, counter, texts, cylinders, points) {\n  let center = [];\n  let right = [];\n  let left = [];\n  if (!frameList[counter]) return;\n  frameList[counter].waypoints.forEach((wp) => {\n    center.push({\n      x: wp.center.x,\n      y: -wp.center.y,\n      z: 0,\n    });\n    if (wp.right) {\n      right.push({\n        x: wp.right.x,\n        y: -wp.right.y,\n        z: 0,\n      });\n    }\n    if (wp.left) {\n      left.push({\n        x: wp.left.x,\n        y: -wp.left.y,\n        z: 0,\n      });\n    }\n  });\n\n  points.push({\n    points: center,\n    scale: { x: 6, y: 6, z: 6 },\n    color: { r: 0, g: 0, b: 1, a: 1 },\n    pose: {\n      position: { x: 0, y: 0, z: 0 },\n      orientation: { x: 0, y: 0, z: 0, w: 1 },\n    },\n  });\n  points.push({\n    points: right,\n    scale: { x: 6, y: 6, z: 6 },\n    color: { r: 1, g: 1, b: 1, a: 1 },\n    pose: {\n      position: { x: 0, y: 0, z: 0 },\n      orientation: { x: 0, y: 0, z: 0, w: 1 },\n    },\n  });\n  points.push({\n    points: left,\n    scale: { x: 6, y: 6, z: 6 },\n    color: { r: 1, g: 1, b: 1, a: 1 },\n    pose: {\n      position: { x: 0, y: 0, z: 0 },\n      orientation: { x: 0, y: 0, z: 0, w: 1 },\n    },\n  });\n\n  frameList[counter].actors.forEach((actor) => {\n    let type = actor.type_id.split(\".\")[0];\n    let supertype = \"vehicle\";\n    if (\n      type === \"vehicle\" ||\n      type === \"car\" ||\n      type === \"bicycle\" ||\n      type === \"motorcycle\" ||\n      type === \"bus\" ||\n      type === \"truck\" ||\n      type === \"train\"\n    )\n      supertype = \"vehicle\";\n    else if (type === \"walker\" || type === \"person\") supertype = \"walker\";\n\n    if (truthOrDet === \"d\") {\n      texts.push({\n        text:\n          actor.type_id +\n          \" \" +\n          actor.id +\n          \" ~\" +\n          actor.distance.toFixed(1) +\n          \"m\",\n        pose: {\n          position: {\n            x: actor.relative_position.x,\n            y: -actor.relative_position.y,\n            z: actor.relative_position.z + 2,\n          },\n        },\n        scale: { x: 1, y: 1, z: 1 },\n      });\n    }\n    cylinders.push({\n      pose: {\n        orientation: { x: 0, y: 0, z: 0, w: 1 },\n        position: {\n          x: actor.relative_position.x,\n          y: -actor.relative_position.y,\n          // z: actor.relative_position.z,\n          z: supertype === \"vehicle\" ? 0 : 0.25,\n        },\n      },\n      scale: actorScale[supertype],\n      color: actorColor[truthOrDet][supertype],\n    });\n  });\n}\n\nexport default function WebViz() {\n  const [tLoaded, setTLoaded] = useState(false);\n  const [dLoaded, setDLoaded] = useState(false);\n  const [counter, setCounter] = useState(0);\n  const [speed, setSpeed] = useState(30);\n  const [playing, setPlaying] = useState(false);\n  const [interval, setMyInterval] = useState(null);\n\n  const videoEl1 = useRef(null);\n  const videoEl2 = useRef(null);\n  const videoEl3 = useRef(null);\n  const [video, setVideo] = useState(1);\n\n  useEffect(() => {\n    const onTruthFile = (data) => {\n      truthFrameList = data;\n      len = Math.max(truthFrameList.length, detectionFrameList.length);\n      console.log(truthFrameList.length);\n      setPlaying(false);\n      setTLoaded(true);\n      setCounter(0);\n      console.log(\"loaded truth\");\n    };\n\n    const onDetectionFile = (data) => {\n      detectionFrameList = data;\n      len = Math.max(truthFrameList.length, detectionFrameList.length);\n      console.log(detectionFrameList.length);\n      setPlaying(false);\n      setDLoaded(true);\n      setCounter(0);\n      console.log(\"loaded detection\");\n    };\n\n    fetch(path + \"/detected.json\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        onDetectionFile(data);\n      })\n      .catch((err) => {});\n    fetch(path + \"/frameList.json\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        onTruthFile(data);\n      })\n      .catch((err) => {});\n  }, []);\n\n  const onPlay = () => {\n    setPlaying((playing) => !playing);\n  };\n\n  const onReset = () => {\n    setPlaying(false);\n    setCounter(0);\n    videoEl1.current.currentTime = 0;\n    videoEl2.current.currentTime = 0;\n    videoEl3.current.currentTime = 0;\n  };\n\n  const onSpeed = () => {\n    setSpeed((speed) => {\n      switch (speed) {\n        case 15:\n          videoEl1.current.playbackRate = 4;\n          videoEl2.current.playbackRate = 4;\n          videoEl3.current.playbackRate = 4;\n          return 120;\n        case 30:\n          videoEl1.current.playbackRate = 0.5;\n          videoEl2.current.playbackRate = 0.5;\n          videoEl3.current.playbackRate = 0.5;\n          return 15;\n        case 60:\n          videoEl1.current.playbackRate = 1;\n          videoEl2.current.playbackRate = 1;\n          videoEl3.current.playbackRate = 1;\n          return 30;\n        case 120:\n          videoEl1.current.playbackRate = 2;\n          videoEl2.current.playbackRate = 2;\n          videoEl3.current.playbackRate = 2;\n          return 60;\n        default:\n          break;\n      }\n    });\n  };\n\n  useEffect(() => {\n    const controlVideo = (videoEl, simTime) => {\n      if (videoEl.current.currentTime > simTime) {\n        videoEl.current.pause();\n        if (simTime === 0) {\n          videoEl.current.currentTime = 0;\n        }\n      } else {\n        videoEl.current.play();\n      }\n    };\n\n    const play = () => {\n      videoEl1.current.play();\n      videoEl2.current.play();\n      videoEl3.current.play();\n      setMyInterval(\n        setInterval(() => {\n          setCounter((counter) => {\n            let simTime = counter / 30;\n            controlVideo(videoEl1, simTime);\n            controlVideo(videoEl2, simTime);\n            controlVideo(videoEl3, simTime);\n            let newC = counter + 1;\n            newC = ((newC % len) + len) % len;\n            return newC;\n          });\n        }, 1000 / speed)\n      );\n    };\n\n    const clear = () => {\n      setMyInterval((interval) => {\n        clearInterval(interval);\n        videoEl1.current.pause();\n        videoEl2.current.pause();\n        videoEl3.current.pause();\n        return null;\n      });\n    };\n\n    if (playing) {\n      clear();\n      play();\n    } else if (!playing) {\n      clear();\n    }\n\n    return clear; // clear listener\n  }, [playing, speed]);\n\n  let texts = [];\n  let cylinders = [];\n  let points = [];\n\n  if (tLoaded) load(truthFrameList, \"t\", counter, texts, cylinders, points);\n  if (dLoaded) load(detectionFrameList, \"d\", counter, texts, cylinders, points);\n\n  useEffect(() => {\n    function onKey(e) {\n      switch (e.code) {\n        case \"Digit1\":\n          onPlay();\n          break;\n        // case \"Digit2\":\n        //   onForward();\n        //   break;\n        case \"Digit2\":\n          onSpeed();\n          break;\n        case \"Digit3\":\n          onReset();\n          break;\n        default:\n          break;\n      }\n    }\n\n    document.addEventListener(\"keydown\", onKey);\n  }, [tLoaded, dLoaded]);\n\n  return (\n    <div className=\"app\">\n      <div className=\"videoContainer\">\n        <video\n          style={{ zIndex: video === 0 ? 1 : 0 }}\n          src={path + \"/output.webm\"}\n          ref={videoEl1}\n        ></video>\n        <video\n          style={{ zIndex: video === 1 ? 1 : 0 }}\n          src={path + \"/outputDET.webm\"}\n          ref={videoEl2}\n        ></video>\n        <video\n          style={{ zIndex: video === 2 ? 1 : 0 }}\n          src={path + \"/outputDP.webm\"}\n          ref={videoEl3}\n        ></video>\n        <div className=\"videoControl\">\n          <p>Video:</p>\n          <button onClick={() => setVideo(0)}>\n            {video === 0 ? <strong>Original</strong> : \"Original\"}\n          </button>\n          <button onClick={() => setVideo(1)}>\n            {video === 1 ? <strong>Detection</strong> : \"Detection\"}\n          </button>\n          <button onClick={() => setVideo(2)}>\n            {video === 2 ? <strong>Depth map</strong> : \"Depth map\"}\n          </button>\n        </div>\n      </div>\n      <div className=\"webViz\">\n        <div className=\"controlBoard\">\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n            }}\n          >\n            <button disabled={!tLoaded && !dLoaded} onClick={onPlay}>\n              Play/Pause <strong>(1)</strong>\n            </button>\n            <button disabled={!tLoaded && !dLoaded} onClick={onSpeed}>\n              Speed <strong>(2)</strong>: <strong>{speed}fps</strong>\n            </button>\n            <button disabled={!tLoaded && !dLoaded} onClick={onReset}>\n              Reset <strong>(3)</strong>\n            </button>\n          </div>\n          <div\n            style={{\n              margin: \"1rem 1.5rem\",\n            }}\n          >\n            <h1>\n              Frame: {tLoaded ? truthFrameList[counter].frame : \"-\"}\n              <br />\n              Simulation time: {(counter / 30.0).toFixed(1)}s\n            </h1>\n            <p>\n              <span class=\"gv\"></span>\n              <span class=\"gw\"></span> Ground truth\n            </p>\n            <p>\n              <span class=\"dv\"></span>\n              <span class=\"dw\"></span> Detected\n            </p>\n            <p>Use your mouse!</p>\n            <p>Left click move camera</p>\n            <p>Right click tilt camera</p>\n            <p>Scroll to zoom</p>\n          </div>\n        </div>\n        <div className=\"worldView\">\n          <Worldview\n            defaultCameraState={{\n              distance: 37.40851758105467,\n              fovy: 0.7853981633974483,\n              phi: 1.1931202979777147,\n              thetaOffset: 1.3685363026390311,\n            }}\n            keyMap={{\n              KeyA: \"moveLeft\",\n              KeyD: \"moveRight\",\n              KeyE: \"rotateRight\",\n              KeyF: \"tiltUp\",\n              KeyQ: \"rotateLeft\",\n              KeyR: \"tiltDown\",\n              KeyS: \"moveDown\",\n              KeyW: \"moveUp\",\n              KeyX: \"zoomOut\",\n              KeyZ: \"zoomIn\",\n            }}\n          >\n            <Cubes>\n              {[\n                {\n                  pose: {\n                    orientation: { x: 0, y: 0, z: 0, w: 1 },\n                    position: {\n                      x: 0,\n                      y: 0,\n                      z: 0,\n                    },\n                  },\n                  scale: { x: 4, y: 1.8, z: 1.5 },\n                  // rgba values are between 0 and 1 (inclusive)\n                  color: { r: 1, g: 0, b: 0, a: 1 },\n                },\n              ]}\n            </Cubes>\n\n            <Points>{points}</Points>\n            <Cylinders>{cylinders}</Cylinders>\n            <Text autoBackgroundColor>{texts}</Text>\n\n            <Axes />\n            <Arrows>\n              {[\n                {\n                  pose: {\n                    orientation: { x: 1, y: 0, z: 0, w: 0 },\n                    position: { x: 0, y: 0, z: 0 },\n                  },\n                  scale: { x: 10, y: 0.8, z: 0.8 },\n                  color: { r: 1, g: 1, b: 1, a: 1 },\n                },\n              ]}\n            </Arrows>\n            <Text autoBackgroundColor>\n              {[\n                {\n                  text: \"X 50m\",\n                  pose: {\n                    position: { x: 50, y: 0, z: 0 },\n                  },\n                  scale: { x: 1, y: 1, z: 1 },\n                },\n                {\n                  text: \"Y 50m\",\n                  pose: {\n                    position: { x: 0, y: -50, z: 0 },\n                  },\n                  scale: { x: 1, y: 1, z: 1 },\n                },\n                {\n                  text: \"Z 25m\",\n                  pose: {\n                    position: { x: 0, y: 0, z: 25 },\n                  },\n                  scale: { x: 1, y: 1, z: 1 },\n                },\n                {\n                  text: \"X 100m\",\n                  pose: {\n                    position: { x: 100, y: 0, z: 0 },\n                  },\n                  scale: { x: 1, y: 1, z: 1 },\n                },\n                {\n                  text: \"Y 100m\",\n                  pose: {\n                    position: { x: 0, y: -100, z: 0 },\n                  },\n                  scale: { x: 1, y: 1, z: 1 },\n                },\n              ]}\n            </Text>\n          </Worldview>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport WebViz from \"./WebViz\";\n\nfunction App() {\n  return (\n      <WebViz />\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}